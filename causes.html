<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Homes Template">
    <meta name="keywords" content="Homes, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Fauna Tears | Species Information</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i"
          rel="stylesheet">
    <link rel="shortcut icon" href="logo-icon.png" type="image/x-icon">

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/flaticon.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">

    <!-- JS Plugin -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/main.js"></script>
    <script src="js/data.js"></script>
    <script src="js/region.js"></script>


</head>

<body onload="myFunction()">
    <!-- Header Section Begin -->
    <header class="header-section">
        <div class="container-fluid">
            <!-- 1st Row Begin -->
            <div class="row">
                <!-- 1st Column Begin -->
                <div class="col-lg-12">
                    <!-- Logo Begin -->
                    <div class="logo">
                        <a href="./home.html">
                            <img src="logo.png" alt="">
                        </a>
                    </div>
                    <!-- Logo End -->
                    <!-- Navigation Begin -->
                    <ul class="main-menu">
                        <li>
                            <a href="./home.html">Home</a>
                        </li>
                        <li>
                            <div class="dropdown">
                                <a href="#">Search</a>
                                <div class="dropdown-content">
                                    <a class="secondary-menu" href="#" onclick="AUS();">Species</a>
                                    <a class="secondary-menu" href="./index2.html">Threats</a>
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href="./map.html">Map</a>
                        </li>
                        <li>
                            <a href="./about.html">About Us</a>
                        </li>
                    </ul>
                    <!-- Navigation End -->
                    <!-- Mobile Menu Begin -->
                    <div id="mobile-menu-wrap"></div>
                    <!-- Mobile Menu End -->
                </div>
                <!-- 1st Column End -->
            </div>
            <!-- 1st Row End -->
        </div>
    </header>
    <!-- Header Section End -->
    <!-- Green Border Begin -->
    <section class="hero-section1 home-page set-bg" data-setbg="img/bg.jpg">
        <div class="container hero-text text-white">
            <h2 id="title"></h2>
        </div>
    </section>
    <!-- Green Border End -->
    <!-- Species Information Begin -->
    <section class="property-details">
        <div class="container">
            <!-- 1st Row Begin -->
            <div class="row sp-40 spt-40">
                <!-- 1st Column Begin -->
                <div class="col-lg-12">
                    <div class="p-ins">
                        <!-- 1st Row Begin -->
                        <div class="row details-top">
                            <div class="col-lg-12">
                                <div class="t-details">
                                    <div class="register-id">
                                        <p>Endangered species found in<span id="info1"></span></p>
                                        <p1>Select a species to learn more information about it.</p1>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <!-- Species Images Begin -->
                            <div class="container">
                                <div class="row" id="region">
                                </div>
                            </div>
                            <!-- Species Images End -->
                        </div>
                        <!-- 1st Row End -->
                        <!-- 2nd Row Begin -->
                        <div class="row">
                            <!-- 1st Column Begin -->
                            <div class="col-lg-12">
                                <div class="property-features">
                                    <h4>Statistics about the causes that threaten the above endangered species</h4>
                                </div>
                            </div>
                            <!-- 1st Column End -->
                        </div>
                        <!-- 2nd Row End -->
                        <!-- 3rd Row Begin -->
                        <div class="row">
                            <div class="col-lg-12">
                                <div id="accordion">
                                    <div class="card">
                                        <button class="card-header mb-0 btn btn-link collapsed" type="button">
                                            Forest Change
                                            <i class="fa fa-caret-square-o-down fav fa-2x" aria-hidden="true"></i>
                                        </button>
                                        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                                            <div class="card-body">
                                                <embed id="1" />
                                                <embed id="2" />
                                                <embed id="3" />
                                                <embed id="4" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <button class="card-header mb-0 btn btn-link collapsed" type="button">
                                            Land Cover
                                            <i class="fa fa-caret-square-o-down fav fa-2x" aria-hidden="true"></i>
                                        </button>
                                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                                            <div class="card-body">
                                                <embed id="5" />
                                                <embed id="6" />
                                                <embed id="7" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <button class="card-header mb-0 btn btn-link collapsed" type="button">
                                            Climate
                                            <i class="fa fa-caret-square-o-down fav fa-2x" aria-hidden="true"></i>
                                        </button>
                                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                                            <div class="card-body" id="3">
                                                <embed id="8" />
                                                <embed id="9" />
                                                <embed id="10" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 1st Column End -->
            </div>
            <!-- 1st Row End -->
        </div>
    </section>
    <!-- Species Information End -->
    <!-- Footer Section Begin -->
    <footer class="footer-section p-40">
        <div class="container">
            <!-- 1st Row Begin -->
            <div class="row">
                <!-- 1st Column Begin -->
                <div class="col-lg-12 text-center">
                    <a href="./home.html">
                        <img src="logo2.png" alt="">
                    </a>
                </div>
                <!-- 1st Column End -->
            </div>
            <!-- 1st Row End -->
            <br />
            <!-- 2nd Row Begin -->
            <div class="row">
                <!-- 1st Column Begin -->
                <div class="col-lg-3">
                </div>
                <!-- 1st Column End -->
                <!-- 2nd Column Begin -->
                <div class="col-lg-2 text-center">
                    <ul class="list-unstyled">
                        <li>
                            <a href="./home.html">Home</a>
                        </li>
                        <li>
                            <a href="./about.html">About Us</a>
                        </li>
                    </ul>
                </div>
                <!-- 2nd Column End -->
                <!-- 3rd Column Begin -->
                <div class="col-lg-2 text-center">
                    <ul class="list-unstyled">
                        <li>
                            <a href="#" onclick="AUS();">Find Species</a>
                        </li>
                        <li>
                            <a href="./index2.html">Find Threats</a>
                        </li>
                        <li>
                            <a href="./map.html">Explore Map</a>
                        </li>
                    </ul>
                </div>
                <!-- 3rd Column End -->
                <!-- 4th Column Begin -->
                <div class="col-lg-2 text-center">
                    <ul class="list-unstyled">
                        <li>
                            <a href="./terms and conditions.html">Terms of Use</a>
                        </li>
                        <li>
                            <a href="./privacy policy.html">Privacy policy</a>
                        </li>
                    </ul>
                </div>
                <!-- 4th Column End -->
                <!-- 5th Column Begin -->
                <div class="col-lg-3">
                </div>
                <!-- 5th Column End -->
            </div>
            <!-- 2nd Row End -->
        </div>
        <br />
        <!-- 3rd Row Begin -->
        <div class="row p-20">
            <!-- 1st Column Begin -->
            <div class="col-lg-12 text-center copyright">
                <div>
                    Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script>
                    All rights reserved | Fauna Tears
                </div>
            </div>
            <!-- 1st Column End -->
        </div>
        <!-- 3rd Row End -->
    </footer>
    <!-- Footer Section End -->
    <!-- Js Functions -->
    <script type="text/javascript">
        var coll = document.getElementsByClassName("card-header");
        var i;

        for (i = 0; i < coll.length; i++) {
          coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var child = this.children;
            if (child[0].className == "fa fa-caret-square-o-down fav fa-2x") {
                child[0].className = "fa fa-caret-square-o-up fav fa-2x";
            }
            else {
                child[0].className = "fa fa-caret-square-o-down fav fa-2x";
            }
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
              content.style.display = "none";
            } else {
              content.style.display = "block";
            }
          });
        }
        function AUS(){
        /*
        @author: Ishika Wikramanayake
        @start_date: 27-08-2019
        @end_date: 27-08-2019
        @description: Opens the index.html page and passes the variable "value"
        */
            var value = "Australia";
            window.location.href = "index.html?category="+value;
        }

        function myFunction() {
        /*
        @author: Ishika Wikramanayake
        @start_date: 27-08-2019
        @end_date: 27-08-2019
        @description: Displays the region information, plots the map and the trend graph
        */

            var region = decodeURIComponent(window.location.search);

            region = region.substring(8);
            document.getElementById("title").innerHTML = region;

            document.getElementById("info1").innerHTML = "&nbsp;" + region;

            unique = {};
            var row = document.getElementById("region");
            for (var i = 0; i < data.length; i++) {
                if (region == data[i]["Region"]) {
                    unique = populateSpecies(i, row, unique, data[i]);
                }
            }

            for (var i = 0; i < regionData.length; i++){
                if (regionData[i]["Region"] == region) {
                    if (regionData[i]["graph1"] != "") {
                        var graph = document.getElementById("1");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph1"];
                    }
                    if (regionData[i]["graph2"] != "") {
                        var graph = document.getElementById("2");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph2"];
                    }
                    if (regionData[i]["graph3"] != "") {
                        var graph = document.getElementById("3");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph3"];
                    }
                    if (regionData[i]["graph4"] != "") {
                        var graph = document.getElementById("4");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph4"];
                    }
                    if (regionData[i]["graph5"] != "") {
                        var graph = document.getElementById("5");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph5"];
                    }
                    if (regionData[i]["graph6"] != "") {
                        var graph = document.getElementById("6");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph6"];
                    }
                    if (regionData[i]["graph7"] != "") {
                        var graph = document.getElementById("7");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph7"];
                    }
                    if (regionData[i]["graph8"] != "") {
                        var graph = document.getElementById("8");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph8"];
                    }
                    if (regionData[i]["graph9"] != "") {
                        var graph = document.getElementById("9");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph9"];
                    }
                    if (regionData[i]["graph10"] != "") {
                        var graph = document.getElementById("10");
                        graph.setAttribute('height', '540');
                        graph.setAttribute('width', '1000');
                        graph.src = regionData[i]["graph10"];
                    }
                    break;
                }
            }


        }

        function populateSpecies(i, row, unique, item) {
        /*
        @author: Ishika Wikramanayake
        @start_date: 13-09-2019
        @end_date: 13-09-2019
        @description: Opens the index.html page and passes the variable "value"
        */
            // update the occurence in the dictionary on encounter
            if (item["Vernacular name - original"] in unique){
                unique[item["Vernacular name - original"]] += 1;
            }
            else{
                // create html tags
                var div1 = document.createElement("div");
                var div2 = document.createElement("div");
                var div3 = document.createElement("div");
                var a1 = document.createElement("a");
                var div4 = document.createElement("div");
                var div5 = document.createElement("div");
                var div6 = document.createElement("div");
                var div7 = document.createElement("div");
                var h5 = document.createElement("h5");
                var p = document.createElement("p");

                // add relevant attributes to the tags created
                div1.setAttribute("class", "col-lg-4 col-md-6");
                div1.setAttribute("id", item["Vernacular name - original"]);
                div1.onclick = function() {
                    var value = this.id;
                    window.location.href = "info.html?species="+value;
                };

                div2.setAttribute("class", "room-items");

                div3.setAttribute("class", "room-img set-bg");

                var name = item["Vernacular name - original"].replace('\'', '_');

                var link = "url('images/" + name + ".jpg')";
                div3.style.content = link;

                a1.setAttribute("class", "room-content");

                div5.setAttribute("class", "room-text");

                div6.setAttribute("class", "room-details");

                div7.setAttribute("class", "room-title");

                h5.innerHTML = item["Vernacular name - original"];
                h5.style.textAlign = "center";

                p.innerHTML = "Ranking: # " + item["Rank"];
                p.style.textAlign = "center";

                // append children to get the proper order of the indented html tags
                div7.appendChild(h5);
                div7.appendChild(p);
                div6.appendChild(div7);
                div5.appendChild(div6);
                div2.appendChild(div3);
                div2.appendChild(div5);
                div1.appendChild(div2);
                row.appendChild(div1);

                unique[item["Vernacular name - original"]] = 1;
            }

            return unique;
        }
    </script>
</body>
</html>
